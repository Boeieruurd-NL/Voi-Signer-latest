!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.r(t),n.d(t,"AlgoSigner",(function(){return g}));var r=n(0),o=n.n(r);let s;!function(e){e[e.None=0]="None",e.NotAuthorized="[RequestErrors.NotAuthorized] The extension user does not authorize the request.",e.InvalidTransactionParams="[RequestErrors.InvalidTransactionParams] Invalid transaction parameters.",e.UnsupportedAlgod="[RequestErrors.UnsupportedAlgod] The provided method is not supported.",e.UnsupportedLedger="[RequestErrors.UnsupportedLedger] The provided ledger is not supported.",e.Undefined="[RequestErrors.Undefined] An undefined error occurred."}(s||(s={}));let i,a,u;!function(e){e.Heartbeat="heartbeat",e.Authorization="authorization",e.AuthorizationAllow="authorization-allow",e.AuthorizationDeny="authorization-deny",e.SignTransaction="sign-transaction",e.Algod="algod",e.Indexer="indexer",e.CreateWallet="create-wallet",e.CreateAccount="create-account",e.SaveAccount="save-account",e.ImportAccount="import-account",e.DeleteAccount="delete-account",e.GetSession="get-session",e.Login="login",e.AccountDetails="account-details",e.Transactions="transactions",e.AssetDetails="asset-details",e.SignSendTransaction="sign-send-transaction"}(i||(i={})),function(e){e.Status="status"}(a||(a={})),function(e){e.Extension="extension",e.DApp="dapp",e.Router="router",e.UI="ui"}(u||(u={}));class c{constructor(){o()(this,"mc",void 0),this.mc=new MessageChannel}listen(e){this.mc.port1.onmessage=e}send(e,t=u.DApp){let n={source:t,body:e};window.postMessage(n,window.location.origin,[this.mc.port2])}}class d{static promise(e,t,n=s.None){return new Promise((r,o)=>{if(n==s.None){let n=new c;n.listen(class{static promise(e,t){return n=>{n.data.error?t(n.data.error):n.data.response?e(n.data.response):t(s.Undefined)}}}.promise(r,o)),n.send(class{static getBody(e,t){return{jsonrpc:"2.0",method:e,params:t,id:(+new Date).toString(16)}}}.getBody(e,t))}else o(n)})}}class l extends class extends class{requiredArgs(e,t){return!(function(e,t){for(var n=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&n.push(e[r]);return n}(e,t).length>0)}}{}{static get inPayloadSign(){return["amount","to"]}connect(){return d.promise(i.Authorization,{})}accounts(){}sign(e,t=s.None){return super.requiredArgs(l.inPayloadSign,Object.keys(e))||(t=s.InvalidTransactionParams),d.promise(i.SignTransaction,e,t)}query(e,t,n=s.None){let r={method:e,params:t};return d.promise(i.Algod,r,n)}subscribe(e,t){l.subscriptions[e]=t}}o()(l,"subscriptions",{});class p{constructor(){o()(this,"handler",void 0),this.handler=this.default,window.addEventListener("message",e=>{var t=e.data;"source"in t&&"extension"==t.source&&(t.source="router",t.origin=window.location.origin,this.handler(t))})}default(e){e.body.method in l.subscriptions&&l.subscriptions[e.body.method](),this.bounce(e)}bounce(e){let t=new c;window.postMessage(e,window.location.origin,[t.mc.port2])}}class f{constructor(){o()(this,"task",new l),o()(this,"router",new p),o()(this,"connect",this.task.connect),o()(this,"sign",this.task.sign),o()(this,"query",this.task.query),o()(this,"subscribe",this.task.subscribe)}static getInstance(){return f.instance||(f.instance=new f),f.instance}}o()(f,"instance",void 0);const g=f.getInstance()}])}));