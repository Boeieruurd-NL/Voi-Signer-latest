!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.r(t),n.d(t,"AlgoSigner",(function(){return g}));var o=n(0),r=n.n(o);let s;!function(e){e[e.None=0]="None",e.NotAuthorized="[RequestErrors.NotAuthorized] The extension user does not authorize the request.",e.InvalidTransactionParams="[RequestErrors.InvalidTransactionParams] Invalid transaction parameters.",e.UnsupportedAlgod="[RequestErrors.UnsupportedAlgod] The provided method is not supported.",e.UnsupportedLedger="[RequestErrors.UnsupportedLedger] The provided ledger is not supported.",e.Undefined="[RequestErrors.Undefined] An undefined error occurred."}(s||(s={}));let i,a,c;!function(e){e.Heartbeat="heartbeat",e.Authorization="authorization",e.AuthorizationAllow="authorization-allow",e.AuthorizationDeny="authorization-deny",e.SignTransaction="sign-transaction",e.Algod="algod",e.Indexer="indexer",e.Accounts="accounts",e.CreateWallet="create-wallet",e.CreateAccount="create-account",e.SaveAccount="save-account",e.ImportAccount="import-account",e.DeleteAccount="delete-account",e.GetSession="get-session",e.Login="login",e.AccountDetails="account-details",e.Transactions="transactions",e.AssetDetails="asset-details",e.SignSendTransaction="sign-send-transaction"}(i||(i={})),function(e){e.Status="status"}(a||(a={})),function(e){e.Extension="extension",e.DApp="dapp",e.Router="router",e.UI="ui"}(c||(c={}));class u{constructor(){r()(this,"mc",void 0),this.mc=new MessageChannel}listen(e){this.mc.port1.onmessage=e}send(e,t=c.DApp){let n={source:t,body:e};window.postMessage(n,window.location.origin,[this.mc.port2])}}class d{static promise(e,t,n=s.None){return new Promise((o,r)=>{if(n==s.None){let n=new u;n.listen(class{static promise(e,t){return n=>{n.data.error?t(n.data.error):n.data.response?e(n.data.response):t(s.Undefined)}}}.promise(o,r)),n.send(class{static getBody(e,t){return{jsonrpc:"2.0",method:e,params:t,id:(+new Date).toString(16)}}}.getBody(e,t))}else r(n)})}}class l extends class extends class{requiredArgs(e,t){return!(function(e,t){for(var n=[],o=0;o<e.length;o++)-1===t.indexOf(e[o])&&n.push(e[o]);return n}(e,t).length>0)}}{}{static get inPayloadSign(){return["amount","to"]}connect(){return d.promise(i.Authorization,{})}accounts(e,t=s.None){return d.promise(i.Accounts,e,t)}sign(e,t=s.None){return super.requiredArgs(l.inPayloadSign,Object.keys(e))||(t=s.InvalidTransactionParams),d.promise(i.SignTransaction,e,t)}query(e,t,n=s.None){let o={method:e,params:t};return d.promise(i.Algod,o,n)}algod(e,t=s.None){return d.promise(i.Algod,e,t)}indexer(e,t=s.None){return d.promise(i.Indexer,e,t)}subscribe(e,t){l.subscriptions[e]=t}}r()(l,"subscriptions",{});class p{constructor(){r()(this,"handler",void 0),this.handler=this.default,window.addEventListener("message",e=>{var t=e.data;"source"in t&&"extension"==t.source&&(t.source="router",t.origin=window.location.origin,this.handler(t))})}default(e){e.body.method in l.subscriptions&&l.subscriptions[e.body.method](),this.bounce(e)}bounce(e){let t=new u;window.postMessage(e,window.location.origin,[t.mc.port2])}}class f{constructor(){r()(this,"task",new l),r()(this,"router",new p),r()(this,"connect",this.task.connect),r()(this,"sign",this.task.sign),r()(this,"accounts",this.task.accounts),r()(this,"algod",this.task.algod),r()(this,"indexer",this.task.indexer),r()(this,"subscribe",this.task.subscribe)}static getInstance(){return f.instance||(f.instance=new f),f.instance}}r()(f,"instance",void 0);const g=f.getInstance()}])}));